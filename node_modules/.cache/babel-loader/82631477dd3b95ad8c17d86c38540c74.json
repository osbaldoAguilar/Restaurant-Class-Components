{"ast":null,"code":"import _objectSpread from\"/Users/osbaldoaguilar/doIt/React-For-Beginners-Starter-Files/catch-of-the-day/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/osbaldoaguilar/doIt/React-For-Beginners-Starter-Files/catch-of-the-day/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/osbaldoaguilar/doIt/React-For-Beginners-Starter-Files/catch-of-the-day/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/osbaldoaguilar/doIt/React-For-Beginners-Starter-Files/catch-of-the-day/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/osbaldoaguilar/doIt/React-For-Beginners-Starter-Files/catch-of-the-day/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import Header from\"./Header\";import Inventory from\"./Inventory\";import Order from\"./Order\";import sampleFishes from'../sample-fishes';import Fish from'./Fish';import base from'../base';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={fishes:{},order:{}};_this.addFish=function(fish){// take copy of exsiting state\nvar fishes=_objectSpread({},_this.state.fishes);// add our data to new \nfishes[\"fish\".concat(Date.now())]=fish;// set new object to state\n_this.setState({fishes:fishes});};_this.updateFish=function(key,updatedFish){// take copy of current state\nvar fishes=_objectSpread({},_this.state.fishes);// update that state\nfishes[key]=updatedFish;// set that to state\n_this.setState({fishes:fishes});};_this.deleteFish=function(key){// copy state\nvar fishes=_objectSpread({},_this.state.fishes);// update state\nfishes[key]=null;// set state\n_this.setState({fishes:fishes});};_this.removeOrder=function(key){var order=_objectSpread({},_this.state.order);delete order[key];_this.setState({order:order});};_this.loadSample=function(){_this.setState({fishes:sampleFishes});};_this.addToOrder=function(key){// 1. take a copy of state\nvar order=_objectSpread({},_this.state.order);// 2. Either add to the order, or update the number in our order\norder[key]=order[key]+1||1;// 3. Call setState to update our state object\n_this.setState({order:order});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var params=this.props.match.params;var localStorageRef=localStorage.getItem(params.storeId);console.log(localStorageRef);if(localStorageRef){this.setState({order:JSON.parse(localStorageRef)});}this.ref=base.syncState(\"\".concat(params.storeId,\"/fishes\"),{context:this,state:'fishes'});// const { params } = this.props.match;\n// this.ref = base.syncState(`${params.storeId}/fishes`, {\n//   context: this,\n//   state: \"fishes\"\n// });\n}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){console.log('Updated');console.log(this.state.order);// const { params } = this.props.match;\nlocalStorage.setItem(this.props.match.params.storeId,JSON.stringify(this.state.order));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){console.log('unmounting');base.removeBinding(this.ref);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"catch-of-the-day\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"menu\",children:[/*#__PURE__*/_jsx(Header,{firstPart:\"Fish\",lastPart:\"Store\",tagline:\"Freash Seafood Market\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"fishes\",children:Object.keys(this.state.fishes).map(function(key){return/*#__PURE__*/_jsx(Fish,{indexOf:key,details:_this2.state.fishes[key],addToOrder:_this2.addToOrder},key);})})]}),/*#__PURE__*/_jsx(Order,{removeOrder:this.removeOrder,fishes:this.state.fishes,order:this.state.order}),/*#__PURE__*/_jsx(Inventory,{addFish:this.addFish,updateFish:this.updateFish,deleteFish:this.deleteFish,loadSample:this.loadSample,fish:this.state.fishes,storeId:this.props.match.params.storeId})]})})});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/osbaldoaguilar/doIt/React-For-Beginners-Starter-Files/catch-of-the-day/src/components/App.js"],"names":["React","Header","Inventory","Order","sampleFishes","Fish","base","App","state","fishes","order","addFish","fish","Date","now","setState","updateFish","key","updatedFish","deleteFish","removeOrder","loadSample","addToOrder","params","props","match","localStorageRef","localStorage","getItem","storeId","console","log","JSON","parse","ref","syncState","context","setItem","stringify","removeBinding","Object","keys","map","Component"],"mappings":"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","sourcesContent":["import React from \"react\"; \nimport Header from \"./Header\";\nimport Inventory from \"./Inventory\";\nimport Order from \"./Order\";\nimport sampleFishes from '../sample-fishes';\nimport Fish from './Fish';\nimport base from '../base'\nclass App extends React.Component {\n    state = {\n        fishes: {},\n        order: {},\n    }\n    \n\n    componentDidMount() {\n        const { params } = this.props.match;\n        const localStorageRef = localStorage.getItem(params.storeId);\n        console.log(localStorageRef);\n        if(localStorageRef) {\n            this.setState({\n                order: JSON.parse(localStorageRef)\n            })\n        }\n        this.ref = base.syncState(`${params.storeId}/fishes`,{\n            context: this,\n            state: 'fishes'\n        })\n        // const { params } = this.props.match;\n        // this.ref = base.syncState(`${params.storeId}/fishes`, {\n        //   context: this,\n        //   state: \"fishes\"\n        // });\n    }\n\n    componentDidUpdate() {\n        console.log('Updated');\n        console.log(this.state.order);\n        // const { params } = this.props.match;\n        localStorage.setItem(this.props.match.params.storeId, JSON.stringify(this.state.order))\n    }\n\n    componentWillUnmount() {\n        console.log('unmounting');\n        base.removeBinding(this.ref)\n    }\n    addFish = fish => {\n        // take copy of exsiting state\n        const fishes = {...this.state.fishes}\n        // add our data to new \n        fishes[`fish${Date.now()}`] = fish\n        // set new object to state\n        this.setState({\n            fishes: fishes\n        })\n    }\n\n    updateFish = (key, updatedFish) => {\n        // take copy of current state\n        const fishes = {...this.state.fishes};\n        // update that state\n        fishes[key] = updatedFish;\n        // set that to state\n        this.setState({ fishes : fishes}) \n    }\n\n    deleteFish = (key) => {\n        // copy state\n        const fishes = {...this.state.fishes};\n        // update state\n        fishes[key] = null;\n        // set state\n        this.setState({ fishes : fishes})\n    }\n\n    removeOrder = (key) => {\n        const order = { ...this.state.order };\n        delete order[key];\n        this.setState({ order })\n    }\n\n    loadSample = () => {\n        this.setState({ fishes : sampleFishes})\n    }\n\n    addToOrder = (key) => {\n    // 1. take a copy of state\n    const order = { ...this.state.order };\n    // 2. Either add to the order, or update the number in our order\n    order[key] = order[key] + 1 || 1;\n    // 3. Call setState to update our state object\n    this.setState({ order });\n    }\n\n    render() {\n        return (\n            <>\n                <React.StrictMode>\n                    <div className=\"catch-of-the-day\">\n                        <div className=\"menu\">\n                            <Header\n                                firstPart=\"Fish\"\n                                lastPart=\"Store\"\n                                tagline=\"Freash Seafood Market\"\n                            />\n                            <ul className=\"fishes\">\n                                {Object.keys(this.state.fishes).map(key=> \n                                <Fish \n                                    key={key} \n                                    indexOf={key}\n                                    details={this.state.fishes[key]} \n                                    addToOrder={this.addToOrder}\n                                    />)}\n                                {/* this loops over each fish based on key*/}\n                            </ul>\n                        </div>\n                        <Order removeOrder={this.removeOrder} fishes={this.state.fishes} order={this.state.order}/>\n                        <Inventory addFish={this.addFish} updateFish={this.updateFish} deleteFish={this.deleteFish} loadSample={this.loadSample} fish={this.state.fishes} storeId={this.props.match.params.storeId}/>\n                    </div>\n                </React.StrictMode>\n            </>\n        )\n    }\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}